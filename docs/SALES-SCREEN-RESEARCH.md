# Supermarket Sales Screen Research Analysis

## Research Sources
- Microsoft Retail Management System (RMS) - Popular in Kenya
- Odoo POS (versions 17/18) - Part of Odoo ERP
- M-Pesa Daraja API STK Push Integration
- Industry best practices for high-volume retail POS

---

## 1. Microsoft RMS Sales Screen Layout

### Key Interface Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Logo]  Microsoft Retail Management System - POS           [_] [â–¡] [X]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Transactions â”‚ Journal â”‚ Reports â”‚ Manager â”‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Item Lookup: [________________________] [Search]  Cashier: John Doe        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ QTY â”‚ ITEM DESCRIPTION    â”‚ PRICE â”‚ TOTALâ”‚  â”‚  â”‚  MILK  â”‚ â”‚ BREAD  â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚  2  â”‚ Brookside Milk 500mlâ”‚  65.00â”‚130.00â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1  â”‚ Supa Loaf Bread     â”‚  55.00â”‚ 55.00â”‚  â”‚  â”‚ SUGAR  â”‚ â”‚  RICE  â”‚    â”‚
â”‚  â”‚  3  â”‚ Mumias Sugar 1kg    â”‚ 180.00â”‚540.00â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚     â”‚                     â”‚       â”‚      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚     â”‚                     â”‚       â”‚      â”‚  â”‚  â”‚  EGGS  â”‚ â”‚COOKING â”‚    â”‚
â”‚  â”‚     â”‚                     â”‚       â”‚      â”‚  â”‚  â”‚        â”‚ â”‚  OIL   â”‚    â”‚
â”‚  â”‚     â”‚                     â”‚       â”‚      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚     â”‚                     â”‚       â”‚      â”‚  â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                                                â”‚  â”‚DISCOUNTâ”‚ â”‚ VOID   â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚ Subtotal:              KES      725.00   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Tax (16% VAT):         KES      116.00   â”‚  â”‚  â”‚ CASH   â”‚ â”‚ MPESA  â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚ TOTAL:                 KES      841.00   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚    COMPLETE SALE   â”‚   â”‚
â”‚                                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  F1-Help â”‚ F2-Customer â”‚ F3-Hold â”‚ F4-Recall â”‚ F9-Pay â”‚ F12-Complete       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RMS Design Principles

1. **Transaction List (Left Side)**
   - Clear columns: Qty, Description, Unit Price, Line Total
   - Alternating row colors for readability
   - Selected row highlighted
   - Easy inline quantity editing

2. **Quick Keys (Right Side)**
   - Large touch-friendly buttons (minimum 80x80px)
   - Color-coded by category
   - Most-sold items prominently placed
   - Special function buttons (Void, Discount, etc.)

3. **Summary Panel (Bottom Left)**
   - Running subtotal always visible
   - Tax breakdown
   - Grand total in large, bold font
   - Savings/discounts shown

4. **Function Keys (Bottom Bar)**
   - Keyboard shortcuts for speed
   - F1-F12 mapped to common actions
   - Consistent across all screens

---

## 2. Odoo POS Interface (v17/18)

### Layout Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°  SUPERMARKET POS          [Search products...]      ğŸ‘¤ Admin  âš™ï¸  ğŸ””    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           â”‚                                             â”‚                   â”‚
â”‚  FRUITS   â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  Current Order    â”‚
â”‚  ğŸ       â”‚  â”‚ ğŸ¥›  â”‚ â”‚ ğŸ  â”‚ â”‚ ğŸ§€  â”‚ â”‚ ğŸ¥š  â”‚ â”‚ ğŸ  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚           â”‚  â”‚Milk â”‚ â”‚Breadâ”‚ â”‚Cheeseâ”‚ â”‚Eggs â”‚ â”‚Appleâ”‚  â”‚                   â”‚
â”‚  DAIRY    â”‚  â”‚65.00â”‚ â”‚55.00â”‚ â”‚120.00â”‚ â”‚15.00â”‚ â”‚10.00â”‚  â”‚  2x Milk    130.00â”‚
â”‚  ğŸ¥›       â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚  1x Bread    55.00â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  3x Sugar   540.00â”‚
â”‚  BAKERY   â”‚  â”‚ ğŸš  â”‚ â”‚ ğŸ§‚  â”‚ â”‚ ğŸ«’  â”‚ â”‚ â˜•  â”‚ â”‚ ğŸ¥¤  â”‚  â”‚                   â”‚
â”‚  ğŸ       â”‚  â”‚Rice â”‚ â”‚Sugarâ”‚ â”‚ Oil â”‚ â”‚Coffeeâ”‚ â”‚Soda â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚           â”‚  â”‚95.00â”‚ â”‚180.00â”‚ â”‚350.00â”‚ â”‚45.00â”‚ â”‚50.00â”‚  â”‚  Subtotal  725.00â”‚
â”‚  BEVERAGESâ”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚  Tax        116.00â”‚
â”‚  ğŸ¥¤       â”‚                                             â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚           â”‚  [1] [2] [3] [Qty]  [+/-]  [Disc%]         â”‚  TOTAL     841.00â”‚
â”‚  HOUSEHOLDâ”‚  [4] [5] [6] [Price]                       â”‚                   â”‚
â”‚  ğŸ§¹       â”‚  [7] [8] [9] [Customer]                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚           â”‚  [.] [0] [âŒ«] [â”â”â”â”â”â”â”]                     â”‚  â”‚   ğŸ’³ PAYMENT  â”‚â”‚
â”‚  ALL      â”‚                                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  ğŸ“¦       â”‚                                             â”‚                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸª Main Shop â”‚ ğŸ“Š Orders Today: 145 â”‚ ğŸ’° Sales: KES 125,430 â”‚ â° 14:32    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Odoo POS Key Features

1. **Category Sidebar (Left)**
   - Visual icons for each category
   - Color-coded backgrounds
   - Active category highlighted
   - "All Products" option

2. **Product Grid (Center)**
   - Card-based product display
   - Product image/icon
   - Name and price clearly visible
   - Touch-friendly size (100x100px minimum)
   - Grid/List toggle option

3. **Order Panel (Right)**
   - Scrollable line items
   - Quantity adjustment buttons
   - Line item removal
   - Running totals
   - Large PAYMENT button

4. **Numeric Keypad (Center-Bottom)**
   - Integrated for quantity entry
   - Price override capability
   - Discount percentage entry
   - Customer lookup

---

## 3. M-Pesa STK Push Integration (Daraja API)

### Payment Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   POS App    â”‚â”€â”€â”€â”€â–¶â”‚  Your API    â”‚â”€â”€â”€â”€â–¶â”‚  Safaricom   â”‚â”€â”€â”€â”€â–¶â”‚  Customer    â”‚
â”‚              â”‚     â”‚   Server     â”‚     â”‚  Daraja API  â”‚     â”‚   Phone      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚  1. Click M-Pesa   â”‚                    â”‚                    â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚                    â”‚                    â”‚
       â”‚                    â”‚  2. STK Push       â”‚                    â”‚
       â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚                    â”‚
       â”‚                    â”‚                    â”‚  3. Push PIN Promptâ”‚
       â”‚                    â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â”‚                    â”‚                    â”‚  4. Customer Entersâ”‚
       â”‚                    â”‚                    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
       â”‚                    â”‚  5. Callback       â”‚                    â”‚
       â”‚                    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                    â”‚
       â”‚  6. Payment Status â”‚                    â”‚                    â”‚
       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                    â”‚                    â”‚
       â”‚                    â”‚                    â”‚                    â”‚
       â–¼                    â–¼                    â–¼                    â–¼
   Receipt Generated    Transaction Logged   M-Pesa Confirms    SMS Received
```

### STK Push Request (C# Implementation)

```csharp
public class MpesaSTKPushRequest
{
    public string BusinessShortCode { get; set; }  // Paybill/Till number
    public string Password { get; set; }           // Base64(ShortCode+Passkey+Timestamp)
    public string Timestamp { get; set; }          // Format: yyyyMMddHHmmss
    public string TransactionType { get; set; }    // "CustomerPayBillOnline" or "CustomerBuyGoodsOnline"
    public decimal Amount { get; set; }
    public string PartyA { get; set; }             // Customer phone (254...)
    public string PartyB { get; set; }             // Business short code
    public string PhoneNumber { get; set; }        // Customer phone (254...)
    public string CallBackURL { get; set; }        // Your callback endpoint
    public string AccountReference { get; set; }   // Invoice/Receipt number
    public string TransactionDesc { get; set; }    // "Payment for goods"
}
```

### Payment Dialog UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    M-PESA PAYMENT                   [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   Amount Due:              KES 841.00                   â”‚
â”‚                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Phone Number (254...)                          â”‚   â”‚
â”‚   â”‚  [254] [7][1][2][3][4][5][6][7][8]              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ [1] [2] [3]                                     â”‚   â”‚
â”‚   â”‚ [4] [5] [6]                                     â”‚   â”‚
â”‚   â”‚ [7] [8] [9]                                     â”‚   â”‚
â”‚   â”‚ [C] [0] [âŒ«]                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚           ğŸ“± SEND STK PUSH                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚   Status: Waiting for customer input...                 â”‚
â”‚                                                         â”‚
â”‚   âšª STK Push Sent                                      â”‚
â”‚   âšª Awaiting PIN Entry                                 â”‚
â”‚   âšª Processing Payment                                 â”‚
â”‚   âšª Payment Confirmed                                  â”‚
â”‚                                                         â”‚
â”‚   [Cancel]                              [Use Cash]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Payment Status States

| State | UI Indicator | Action |
|-------|--------------|--------|
| `Pending` | ğŸŸ¡ Yellow spinner | "Sending request..." |
| `Sent` | ğŸ”µ Blue pulse | "Check your phone for M-Pesa prompt" |
| `Processing` | ğŸŸ  Orange spinner | "Customer entering PIN..." |
| `Success` | ğŸŸ¢ Green checkmark | "Payment received!" + Auto-close |
| `Failed` | ğŸ”´ Red X | "Payment failed: [reason]" + Retry option |
| `Cancelled` | âš« Grey | "Request cancelled" |
| `Timeout` | ğŸŸ  Orange warning | "Request timed out" + Retry option |

---

## 4. Recommended Sales Screen Design

### Final Layout (Combining Best Practices)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HOSPITALITY POS - SALES                    Cashier: John â”‚ Register 1  ğŸ”” â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            â”‚  [ğŸ” Search or scan barcode...]        â”‚                       â”‚
â”‚ CATEGORIES â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    CURRENT ORDER      â”‚
â”‚            â”‚                                        â”‚    â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                       â”‚
â”‚ â”‚ğŸ¥› DAIRYâ”‚ â”‚  â”‚  ğŸ¥›    â”‚ â”‚  ğŸ    â”‚ â”‚  ğŸ§€    â”‚    â”‚  Brookside Milk       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  Milk  â”‚ â”‚ Bread  â”‚ â”‚ Cheese â”‚    â”‚  2 Ã— 65.00    130.00  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ KES 65 â”‚ â”‚ KES 55 â”‚ â”‚KES 120 â”‚    â”‚  [-] [2] [+] [ğŸ—‘ï¸]     â”‚
â”‚ â”‚ğŸ BAKERYâ”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  Supa Loaf Bread      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  ğŸ¥š    â”‚ â”‚  ğŸš    â”‚ â”‚  ğŸ§‚    â”‚    â”‚  1 Ã— 55.00     55.00  â”‚
â”‚ â”‚ğŸ¥¤ DRINKSâ”‚ â”‚  â”‚ Eggs   â”‚ â”‚ Rice   â”‚ â”‚ Sugar  â”‚    â”‚  [-] [1] [+] [ğŸ—‘ï¸]     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ KES 15 â”‚ â”‚ KES 95 â”‚ â”‚KES 180 â”‚    â”‚                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  Mumias Sugar 1kg     â”‚
â”‚ â”‚ğŸ§¹ HOME â”‚ â”‚                                        â”‚  3 Ã— 180.00   540.00  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  [-] [3] [+] [ğŸ—‘ï¸]     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  ğŸ«’    â”‚ â”‚  â˜•    â”‚ â”‚  ğŸ¥¤    â”‚    â”‚                       â”‚
â”‚ â”‚ğŸ“¦ ALL  â”‚ â”‚  â”‚  Oil   â”‚ â”‚ Coffee â”‚ â”‚ Soda   â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚KES 350 â”‚ â”‚ KES 45 â”‚ â”‚ KES 50 â”‚    â”‚ Subtotal:     725.00  â”‚
â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ VAT (16%):    116.00  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â”‚ QUICK KEYS â”‚  â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”        â”‚ TOTAL:     KES 841.00 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  1  â”‚â”‚  2  â”‚â”‚  3  â”‚â”‚ QTY â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚% DISC  â”‚ â”‚  â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  4  â”‚â”‚  5  â”‚â”‚  6  â”‚â”‚PRICEâ”‚        â”‚ â”‚ CASH  â”‚ â”‚ ğŸ“±MPESA â”‚ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤        â”‚ â”‚ (F5)  â”‚ â”‚  (F6)   â”‚ â”‚
â”‚ â”‚ğŸš« VOID â”‚ â”‚  â”‚  7  â”‚â”‚  8  â”‚â”‚  9  â”‚â”‚ CLR â”‚        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”¤        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  .  â”‚â”‚  0  â”‚â”‚ âŒ«  â”‚â”‚ENTERâ”‚        â”‚ â”‚ CARD  â”‚ â”‚ CREDIT  â”‚ â”‚
â”‚ â”‚â¸ï¸ HOLD â”‚ â”‚  â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜        â”‚ â”‚ (F7)  â”‚ â”‚  (F8)   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚            â”‚                                        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚            â”‚                                        â”‚ â”‚   âœ“ COMPLETE SALE   â”‚â”‚
â”‚            â”‚                                        â”‚ â”‚       (F12)         â”‚â”‚
â”‚            â”‚                                        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ F1 Help â”‚ F2 Customer â”‚ F3 Hold â”‚ F4 Recall â”‚ F5 Cash â”‚ F6 M-Pesa â”‚ F12 Pay â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Key Design Decisions

#### 1. Three-Column Layout
- **Left (15%)**: Categories + Quick action buttons
- **Center (50%)**: Product grid with search bar and numpad
- **Right (35%)**: Order summary with payment buttons

#### 2. Touch Targets
- Minimum 48x48px for all interactive elements
- Product cards: 100x100px for easy touch
- Payment buttons: Large and prominent

#### 3. Color Coding
- Categories: Distinct colors for quick visual identification
- Payment methods:
  - Cash: Green
  - M-Pesa: Green (Safaricom brand color)
  - Card: Blue
  - Credit: Orange
- Status indicators: Red for void/cancel, Green for success

#### 4. Keyboard Shortcuts
| Key | Action |
|-----|--------|
| F1 | Help |
| F2 | Customer lookup |
| F3 | Hold transaction |
| F4 | Recall held transaction |
| F5 | Cash payment |
| F6 | M-Pesa payment |
| F7 | Card payment |
| F8 | Credit/Account |
| F12 | Complete sale |
| Esc | Cancel/Back |
| Enter | Add item / Confirm |

#### 5. Barcode Scanner Integration
- Auto-focus on search field
- Support for USB/Bluetooth scanners
- Immediate product lookup and add
- Audio feedback on scan

---

## 5. Implementation Priorities

### Phase 1: Core Sales Screen
1. Implement 3-column layout
2. Product grid with category filtering
3. Order panel with quantity controls
4. Basic cash payment

### Phase 2: M-Pesa Integration
1. M-Pesa payment dialog
2. STK push API integration
3. Payment status polling
4. Callback handling

### Phase 3: Enhanced Features
1. Hold/Recall transactions
2. Customer lookup
3. Discount management
4. Receipt printing

### Phase 4: Performance
1. Product search optimization
2. Keyboard shortcut system
3. Barcode scanner support
4. Touch gestures

---

## 6. M-Pesa Service Implementation

```csharp
public interface IMpesaService
{
    Task<STKPushResponse> InitiateSTKPushAsync(STKPushRequest request);
    Task<TransactionStatus> QueryTransactionStatusAsync(string checkoutRequestId);
    Task<bool> ValidateCallbackAsync(MpesaCallback callback);
}

public class STKPushRequest
{
    public string PhoneNumber { get; set; }      // 254XXXXXXXXX format
    public decimal Amount { get; set; }
    public string AccountReference { get; set; } // Receipt/Invoice number
    public string Description { get; set; }
}

public class STKPushResponse
{
    public bool Success { get; set; }
    public string MerchantRequestID { get; set; }
    public string CheckoutRequestID { get; set; }
    public string ResponseDescription { get; set; }
    public string CustomerMessage { get; set; }
}

public enum TransactionStatus
{
    Pending,
    Sent,
    Processing,
    Completed,
    Failed,
    Cancelled,
    Timeout
}
```

---

## References

- Microsoft RMS Documentation
- Odoo POS 17/18 User Guide
- Safaricom Daraja API Documentation: https://developer.safaricom.co.ke
- Kenya POS Integration Best Practices
- Touch Interface Design Guidelines (Apple HIG, Material Design)
